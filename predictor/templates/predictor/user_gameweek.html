<!DOCTYPE html>
<html>
  {% extends "predictor/base.html" %}
  <head>
    <title>
      {% block title %} | Gameweek {{ gameweek }}{% endblock %}
    </title>
  </head>
  <body>
    {% block content %}
      <div class="page-title" align="center">
        Gameweek {{ gameweek }}
      </div>
      <hr/>
      <div class="gameweek-points">
        {% if username == gameweek_user.username %}
          {{ gameweek_user.first_name }} {{ gameweek_user.last_name }}&nbsp;&nbsp;-&nbsp;&nbsp;
        {% endif %}
        {% if gameweek_result %}
          Total Points: {{ gameweek_result.total_points }}
        {% else %}
          Gameweek In Progress
        {% endif %}
      </div>
      <table class="table-fill">
        <thead>
          <tr>
            <th class="text-left">Prediction</th>
            <th class="text-left">Final Score</th>
            <th class="text-left">Points</th>
          </tr>
        </thead>
        <tbody>
          {% for prediction, prediction_result in predictions_dict.items %}
            <tr class="table-selectable-row" data-toggle="collapse" data-target="#point-detail-{{prediction_result.id}}">
              <td class="text-left padded-cell">
                <div class="team-name team-name-home">
                  {{ prediction.match.home_team }}
                </div>
                <div class="match-score-display">
                  {{ prediction.home_score }} - {{ prediction.away_score }}
                </div>
                <div class="team-name team-name-away">
                  {{ prediction.match.away_team }}
                </div>
                {% if prediction_result %}
                  <div id="point-detail-{{prediction_result.id}}" class="collapse">
                    <br/>
                    <table>
                      <tbody>
                        <tr>
                          <td><div class="point-detail">Result Points:</div></td>
                          <td><div class="point-detail">{% if prediction_result.result %}3{% else %}0{% endif %}</div></td>
                        </tr>
                        <tr>
                          <td><div class="point-detail">Scored Home Points: </div></td>
                          <td><div class="point-detail">{% if prediction_result.home_scored %}1{% else %}0{% endif %}</div></td>
                        </tr>
                        <tr>
                          <td><div class="point-detail">Scored Away Points: </div></td>
                          <td><div class="point-detail">{% if prediction_result.away_scored %}1{% else %}0{% endif %}</div></td>
                        </tr>
                        <tr>
                          <td><div class="point-detail">Goals Home Points: </div></td>
                          <td><div class="point-detail">{% if prediction_result.home_goals %}2{% else %}0{% endif %}</div></td>
                        </tr>
                        <tr>
                          <td><div class="point-detail">Goals Away Points: </div></td>
                          <td><div class="point-detail">{% if prediction_result.away_goals %}2{% else %}0{% endif %}</div></td>
                        </tr>
                        <tr>
                          <td><div class="point-detail">Exact Scoreline Bonus Points: </div></td>
                          <td><div class="point-detail">{% if prediction_result.scoreline %}3{% else %}0{% endif %}</div></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                {% endif %}
              </td>
              <td class="text-center padded-cell">
                {% if prediction_result %}
                  <div class="match-score-display">
                  {{ prediction_result.prediction.match.home_score }} - {{ prediction_result.prediction.match.away_score }}
                  </div>
                {% endif %}
              </td>
              <td class="text-center padded-cell">
                {% if prediction_result %}
                  <div class="prediction-score">
                    {{ prediction_result.points }}
                  </div>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endblock %}
  </body>
</html>
